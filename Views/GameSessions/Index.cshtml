@using CollectionJsonExtended.Core
@model IEnumerable<GameSession>

@{
    ViewBag.Title = "Index GameSessions";
}

<section>
    <form ng-controller="GameSessionsController" name="gameSessions">
        @*data-base-uri="foo/bar/api/gamesessions/"*@
        
        @*<section>
            <h2>recursion directive ('E')</h2>
            <recursion current="{prompt: 'a', data:[{prompt: 'b', data:[{prompt: 'c'},{prompt: 'c', data:[{prompt: 'd'}]}]},{prompt: 'b', data:[]}]}">
                <p>{{current.prompt}} (from directive template return function evaluating inline html)</p>
                <ul>
                    <li ng-repeat="item in current.data">
                        <recursion current="item"></recursion>
                    </li>
                </ul>
            </recursion>

            <h2>recursion directive ('A')</h2>
            <div recursion="{prompt: 'a', data:[{prompt: 'b', data:[{prompt: 'c'},{prompt: 'c', data:[{prompt: 'd'}]}]},{prompt: 'b', data:[]}]}">
                <p>{{recursion.prompt}} (from directive template return function evaluating inline html)</p>
                <ul>
                    <li ng-repeat="item in recursion.data">
                        <div recursion="item"></div>
                    </li>
                </ul>
            </div>
        </section>*@


        @*<section>
            <h3><input type="checkbox" ng-model="toggle1"/> mod-include directive ('A')</h3>

            <ul>
                <li ng-repeat="item in testData" inline-include="foo">
                    
                    <span>some text</span>
                    <p ng-if="1==1">
                        prompt: {{item.prompt}}
                    </p>

                    <ul>
                        <li ng-repeat="item in item.data" inline-include="foo"></li>
                    </ul>

                    <span>some text beneath</span>

                </li>
            </ul>
        </section>*@


        <section>
            <h3><input type="checkbox" ng-model="toggler"/>collection directive: has inline content:</h3>

            <div class="collection" a-collection="/foo/bar/api/gamesessions" ng-if="toggler">

                <p>I am inline!</p>
                <p>random: {{random}}</p>
                <p>version: {{base.version}}</p>

                <ul class="template-data">
                    <li class="item" ng-repeat="item in base.template.data"
                        inline-include="collection-json-template">
                    
                        <div class="typeof" ng-switch="getDataItemType(item)">

                            the data type of this: {{getDataItemType(item)}}

                            <div class="value" ng-switch-when="value">
                                <label>{{item.prompt}}</label>
                                <input type="text" name="{{item.name}}"></input>                 
                            </div>

                            <div class="values" ng-switch-when="values">
                                <label>{{item.prompt}}</label>                            
                            </div>

                            <div class="object" ng-switch-when="object">
                                <label>{{item.prompt}}</label>
                                <ul>
                                    <li ng-repeat="item in item.data"
                                        inline-include="collection-json-templat"></li>
                                </ul>
                            </div>

                            <div class="objects" ng-switch-when="objects">
                                <label>{{item.prompt}}</label>                            
                            </div>

                            <p class="not-supported" ng-switch-default>No supported data item type found.</p>

                        </div>

                    </li>
                </ul>

            </div>     
        </section>


        @*<section>
            <h2> Game Sessions from server</h2>
            <ul>
                <li ng-repeat="session in items">
                    <h2>{{session.date}}</h2>
                </li>
            </ul>
        
            <button ng-click="create()">Game Session (server)</button>
        </section>*@
       

    </form>
</section>



@section scripts
{
    <script type="text/javascript" src="/js/api.gurps.angular.js"></script>
    @*<script type="text/javascript">
        angular.module('app').value('gameSessions', @( MvcHtmlString.Create(new CollectionJsonWriter<GameSession>().Serialize() )) );
    </script>*@
}
